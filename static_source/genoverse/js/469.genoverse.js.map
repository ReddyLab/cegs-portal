{"version":3,"file":"469.genoverse.js","mappings":"kHAEA,IAAMA,EAAa,SAAUC,GAG3B,MAAY,QAFZA,EAAMA,EAAIC,eAGD,SAGFD,CACR,EAiGD,WAAiBE,SA/FF,WACb,IAAMC,EAASC,KAAKD,OAEpBC,KAAKC,GAAG,aAAa,WACnB,IAAMC,EAAUF,KACVG,EAAUH,KAAKG,QAErBJ,EAAOK,QAAQH,GAAG,aAAa,SAACI,GAC9B,IAAMC,EAAeD,EAAEE,cAAcD,aAErC,GACEA,SAAAA,EAAcE,QACa,UAA1BF,EAAaE,MAAM,IACQ,UAA1BF,EAAaE,MAAM,IACO,UAA1BF,EAAaE,MAAM,MACpBT,EAAO,+BAA+BU,OACvC,CACA,IAAMC,EAAcX,EAAO,8BAA8BY,SACvDR,GAEIS,EAAmBb,EACvB,4CACAc,UAAU,QAENC,EAAY,WAChBJ,EAAYK,SACZH,EAAiBG,QAClB,EAEDH,EAAiBX,GAAG,aAAa,SAACe,GAChCA,EAAGC,iBACHD,EAAGE,iBACJ,IACDN,EAAiBX,GAAG,YAAY,SAACe,GAC/BA,EAAGC,iBACHD,EAAGE,iBACJ,IACDN,EAAiBX,GAAG,YAAaa,GACjCF,EAAiBX,GAAG,QAAQ,SAACe,GAC3BF,IACAE,EAAGC,iBACHD,EAAGE,kBAQH,IALA,IAAMC,EAAQC,OAAOC,OAAOL,EAAGT,cAAcD,aAAaa,OAAOG,MAC/D,SAACC,EAAGC,GAAJ,OAAUD,EAAEE,KAAKC,cAAcF,EAAEC,KAAjC,IAEIE,EAAiB,GAEdC,EAAI,EAAGA,EAAIT,EAAMV,OAAQmB,IAAK,CACrC,IAAMC,EAAOV,EAAMS,GACbE,EAAQD,EAAKJ,KAAKM,MAAM,KAAKC,UAC7BC,EAAkB,OAAbH,EAAM,GACXlC,EAAMkC,EAAMG,EAAK,EAAI,GAEvBC,OAAS,EAGXf,EAAMS,EAAI,IACV,IAAIO,OAAJ,WAAeN,EAAKJ,KAApB,aAAoCW,KAAKjB,EAAMS,EAAI,GAAGH,QAEtDS,EAAYf,IAAQS,IAGtBD,EAAeU,KAAK,CAClBR,KAAMA,EACNK,UAAWA,EACXD,GAAIA,EACJK,UAAW3C,EAAWC,IAEzB,CAED+B,EAAeY,SAAQ,SAACC,GACtB,QAAO,YAAyBA,EAASF,YAAaG,MACpD,SAACC,GACC,IAAMC,EAAQD,EAAQ,QAASE,OAAO,CACpCnB,KAAMe,EAASX,KAAKJ,KACpBoB,KAAM,eAAF,OAAiBL,EAASX,KAAKJ,KAA/B,oBAA+Ce,EAASX,KAAKiB,KAA7D,UACJC,SAAS,EACTC,SAAUR,EAASX,KACnBK,UAAWM,EAASN,UACpBD,GAAIO,EAASP,KAGf/B,EAAQ+C,SAASN,EAAOzC,EAAQgD,OAAOzC,OAAS,EACjD,IACD,WAAQ,GAEX,GACF,GACF,CACF,GACF,GACF,E,uBCzGD,IAAI0C,EAAM,CACT,QAAS,KACT,WAAY,KACZ,QAAS,KACT,WAAY,KACZ,WAAY,IACZ,cAAe,IACf,WAAY,KACZ,cAAe,KACf,QAAS,KACT,WAAY,KACZ,QAAS,KACT,WAAY,KACZ,QAAS,KACT,WAAY,MAGb,SAASC,EAAoBC,GAC5B,OAAOC,QAAQC,UAAUd,MAAK,WAC7B,IAAIe,EAAoBC,EAAEN,EAAKE,GAAM,CACpC,IAAIhD,EAAI,IAAIqD,MAAM,uBAAyBL,EAAM,KAEjD,MADAhD,EAAEsD,KAAO,mBACHtD,CACP,CAGA,OAAOmD,EADEL,EAAIE,GAEd,GACD,CACAD,EAAoBQ,KAAO,WAAa,OAAOxC,OAAOwC,KAAKT,EAAM,EACjEC,EAAoBS,GAAK,KACzBC,EAAOC,QAAUX,C","sources":["webpack://genoverse/./src/js/plugins/fileDrop.js","webpack://genoverse/./src/js/Track/library/File/ lazy ^\\.\\/.*$ namespace object"],"sourcesContent":["import \"../../css/fileDrop.css\";\n\nconst extToTrack = function (ext) {\n  ext = ext.toUpperCase();\n\n  if (ext === \"BW\") {\n    return \"BIGWIG\";\n  }\n\n  return ext;\n};\n\nconst plugin = function () {\n  const jQuery = this.jQuery;\n\n  this.on(\"afterInit\", function () {\n    const browser = this;\n    const wrapper = this.wrapper;\n\n    jQuery(window).on(\"dragenter\", (e) => {\n      const dataTransfer = e.originalEvent.dataTransfer;\n\n      if (\n        dataTransfer?.types &&\n        (dataTransfer.types[0] === \"Files\" ||\n          dataTransfer.types[1] === \"Files\" ||\n          dataTransfer.types[2] === \"Files\") &&\n        !jQuery(\".gv-file-drop-total-overlay\").length\n      ) {\n        const fileDropDiv = jQuery('<div class=\"gv-file-drop\">').appendTo(\n          wrapper,\n        );\n        const totalDropOverlay = jQuery(\n          '<div class=\"gv-file-drop-total-overlay\">',\n        ).prependTo(\"body\");\n\n        const dragleave = () => {\n          fileDropDiv.remove();\n          totalDropOverlay.remove();\n        };\n\n        totalDropOverlay.on(\"dragenter\", (ev) => {\n          ev.preventDefault();\n          ev.stopPropagation();\n        });\n        totalDropOverlay.on(\"dragover\", (ev) => {\n          ev.preventDefault();\n          ev.stopPropagation();\n        });\n        totalDropOverlay.on(\"dragleave\", dragleave);\n        totalDropOverlay.on(\"drop\", (ev) => {\n          dragleave();\n          ev.preventDefault();\n          ev.stopPropagation();\n\n          // Sort in order to ensure that .bam files are before their .bam.bai files\n          const files = Object.values(ev.originalEvent.dataTransfer.files).sort(\n            (a, b) => a.name.localeCompare(b.name),\n          );\n          const trackImporters = [];\n\n          for (let i = 0; i < files.length; i++) {\n            const file = files[i];\n            const parts = file.name.split(\".\").reverse();\n            const gz = parts[0] === \"gz\";\n            const ext = parts[gz ? 1 : 0];\n\n            let indexFile;\n\n            if (\n              files[i + 1] &&\n              new RegExp(`^${file.name}\\\\.\\\\w+$`).test(files[i + 1].name)\n            ) {\n              indexFile = files[++i];\n            }\n\n            trackImporters.push({\n              file: file,\n              indexFile: indexFile,\n              gz: gz,\n              trackType: extToTrack(ext),\n            });\n          }\n\n          trackImporters.forEach((importer) => {\n            import(`../Track/library/File/${importer.trackType}`).then(\n              (imported) => {\n                const track = imported.default.extend({\n                  name: importer.file.name,\n                  info: `Local file \"${importer.file.name}\", size: ${importer.file.size} bytes`,\n                  isLocal: true,\n                  dataFile: importer.file,\n                  indexFile: importer.indexFile,\n                  gz: importer.gz,\n                });\n\n                browser.addTrack(track, browser.tracks.length - 1);\n              },\n              () => {},\n            );\n          });\n        });\n      }\n    });\n  });\n};\n\nexport default { fileDrop: plugin };\n","var map = {\n\t\"./BAM\": 4448,\n\t\"./BAM.js\": 4448,\n\t\"./BED\": 4149,\n\t\"./BED.js\": 4149,\n\t\"./BIGBED\": 617,\n\t\"./BIGBED.js\": 617,\n\t\"./BIGWIG\": 9658,\n\t\"./BIGWIG.js\": 9658,\n\t\"./GFF\": 8428,\n\t\"./GFF.js\": 8428,\n\t\"./VCF\": 1055,\n\t\"./VCF.js\": 1055,\n\t\"./WIG\": 8915,\n\t\"./WIG.js\": 8915\n};\n\nfunction webpackAsyncContext(req) {\n\treturn Promise.resolve().then(function() {\n\t\tif(!__webpack_require__.o(map, req)) {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t}\n\n\t\tvar id = map[req];\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function() { return Object.keys(map); };\nwebpackAsyncContext.id = 5405;\nmodule.exports = webpackAsyncContext;"],"names":["extToTrack","ext","toUpperCase","fileDrop","jQuery","this","on","browser","wrapper","window","e","dataTransfer","originalEvent","types","length","fileDropDiv","appendTo","totalDropOverlay","prependTo","dragleave","remove","ev","preventDefault","stopPropagation","files","Object","values","sort","a","b","name","localeCompare","trackImporters","i","file","parts","split","reverse","gz","indexFile","RegExp","test","push","trackType","forEach","importer","then","imported","track","extend","info","size","isLocal","dataFile","addTrack","tracks","map","webpackAsyncContext","req","Promise","resolve","__webpack_require__","o","Error","code","keys","id","module","exports"],"sourceRoot":""}
