{"version":3,"file":"902.genoverse.js","mappings":"mIAGA,MAicA,GAAiBA,aAjcF,SAAUC,GACvB,MAAMC,EAASC,KAAKD,OAEpBC,KAAKC,SAAW,CAEd,CACEC,KAAM,8DACNC,QAAS,CACP,CACED,KAAM,cACNE,KAAM,sCACNC,MAAO,kBAET,CACEH,KAAM,eACNE,KAAM,uCACNC,MAAO,oBAGXC,KAAM,SAAUC,GACd,MAAMC,EAAKT,EAAOC,MAElBQ,EAAGC,KAAK,qCAAqCC,GAAG,CAC9CC,UAAW,KACTJ,EAAQK,iBAAiB,EAE3BC,QAAS,KACPN,EAAQO,gBAAgB,IAI5BN,EAAGC,KAAK,mBAAmBM,UAAU,IAAI,KACvCR,EAAQS,KAAKT,EAAQU,YAAY,IAEnCT,EAAGC,KAAK,oBAAoBM,UAAU,IAAI,KACxCR,EAAQS,MAAMT,EAAQU,YAAY,GAEtC,GAIF,CACEf,KAAM,uBACNC,QAAS,CACP,CACED,KAAM,UACNE,KAAM,qCACNC,MAAO,aACPa,OAASX,IACPA,EAAQY,QAAQ,GAGpB,CACEjB,KAAM,WACNE,KAAM,sCACNC,MAAO,cACPa,OAASX,IACPA,EAAQa,SAAS,MAOvBpB,KAAKqB,UACPrB,KAAKC,SAASqB,KAAK,CACjBlB,KAAM,8BACNF,KAAM,iCACNgB,OAASX,IACPA,EAAQgB,aAAa,IAK3BvB,KAAKU,GAAG,CACNc,WAAY,WACV,MAAMjB,EAAUP,KAEhBA,KAAKyB,eAAiBzB,KAAKyB,eAAiBzB,KAAK0B,QAC9CC,KAAKC,GAAU5B,KAAK6B,yBAAyBD,KAC7CE,QAAQF,GAAUA,EAAMG,UAAU7B,OAErC,MAAM8B,EAAQjC,EAAO,uRASlBkC,SAASjC,KAAKkC,WACdzB,KAAK,mBAERT,KAAKH,aAAemC,EACpBhC,KAAKmC,eAAiBnC,KAAKkC,UAC3BlC,KAAKkC,UAAYnC,EAAO,uBAAwBC,KAAKkC,WAErD3B,EAAQN,SAASmC,SAASC,IACxB,MAAMC,EAAYvC,EAAO,+BACtBwC,KAAK,QAASF,EAAQnC,MACtB+B,SAAS1B,EAAQ4B,eAAe1B,KAAK,qBACxB4B,EAAQlC,SAAW,CAACkC,IAE5BD,SAASI,IACf,MAAMhC,EAAKT,EAAO,WAAWyC,EAAOpC,iBACjCqC,SAASD,EAAOnC,OAChBkC,KAAK,QAASC,EAAOtC,MACrB+B,SAASK,GAERE,EAAOtB,QACTV,EAAGE,GAAG,SAAS,KACb8B,EAAOtB,OAAOwB,KAAKlC,EAAG,GAAID,EAAQ,IAIlCiC,EAAOlC,MAAQkC,IAAWH,GAC5BG,EAAOlC,KAAKoC,KAAKlC,EAAG,GAAID,EAC1B,IAGE8B,EAAQ/B,MACV+B,EAAQ/B,KAAKoC,KAAKJ,EAAW/B,EAC/B,IAGFP,KAAKmC,eAAeQ,MAAM3C,KAAK2C,OAG/B5C,EAAO6C,UAAUlC,GAAG,WAAYmC,IACZ,KAAdA,EAAEC,UACAd,EAAMvB,KAAK,yBAAyBsC,SAAS,cAC/Cf,EAAMvB,KAAK,yBAAyBuC,QAAQ,SAG9CjD,EAAO,sBAAsBiD,QAAQ,SACvC,GAEJ,EAEAC,UAAW,WACT,MAAM1C,EAAUP,KACVkD,EAAenD,EACnB,4GACAW,GAAG,SAAS,WACZ,MAAM8B,EAASxC,KAETmD,EAAe,CAACvB,EAAOwB,IAC3BxB,EAAMyB,aAAaC,UAAUvB,UACzBoB,EACEvB,EAAMyB,YAAYC,SAASvB,UAC3BqB,EAAKG,OAAO3B,EAAMyB,YAAYC,SAASvB,UAAUqB,MAAQ,KAE3DA,EAEN,GAAIrD,EAAOC,MAAM+C,SAAS,aACxBhD,EAAO,qCAAqCiD,QAAQ,SACpDjD,EAAOC,MAAMwD,YAAY,iBACpB,CACL,IAAIC,EAAO1D,EAAOC,MAAM0D,KAAK,QAE7B,GAAID,EACFA,EAAKE,WACA,CACLF,EAAOlD,EACJqD,SAAS,CACR,4BAA6B,oBAC7B,wCACE,wEAEHnB,SAAS,kBAEZ1C,EAAO,4BAA6B0D,GAAM/C,GAAG,SAAS,WACpD,MAAMmD,EAAM7D,KAAK8D,MAAMC,cAEvBhE,EAAO,0BAA2B0D,GAAMO,MAAK,WAC3C,MAAMpC,EAAQ7B,EAAOC,MAAM0D,KAAK,SAEhC,IAAIO,GAAQ,EAEZ,GAAIrC,EAAM1B,MAAQ0B,EAAM1B,KAAK6D,cAAcG,QAAQL,IAAQ,EACzDI,GAAQ,MACH,CACQd,EAAavB,EAAO,IAAI2B,OAAO3B,EAAMwB,MAAQ,IAEjDe,MAAMC,GAAQA,EAAIL,cAAcG,QAAQL,IAAQ,MACvDI,GAAQ,EAEZ,CAEAlE,EAAOC,MAAMiE,EAAQ,cAAgB,YAAY,UACnD,IAEAlE,EAAO,8BAA+B0D,GAAMO,MAAK,WAC/C,MAAMK,EAAgBtE,EAAOC,MAAMsE,SACjC,yCAGFvE,EAAOC,MAAMqE,EAAcE,OAAS,cAAgB,YAClD,UAEJ,GACF,IAEAxE,EAAO,YAAa0D,GAAM/C,GAAG,SAAS,KACpCX,EAAOyC,GAAQgB,YAAY,YAAY,IAGzC,MAAMgB,EAAkBzE,EAAO,uBAAwB0D,GACjDgB,EAAgB1E,EAAO,qBAAsB0D,GAChDiB,OACC,8EAEDhB,KAAK,CACJiB,OAAQ,WACN5E,EAAOC,MAAM4E,QAAQlB,KAAK,aAA1B3D,EACF,EACA8E,WAAY,WACVtE,EAAQmB,OACLI,QACEF,GACCA,EAAM1B,SACgB,IAApB0B,EAAMkD,WAAuBlD,EAAMmD,cACpCnD,EAAMoD,cACNpD,EAAMqD,cAEV7C,SAASR,IACR,MAAMpB,EAAKT,EAAO,sCACfmF,OACC,kDAAkDtD,EAAM1B,SAAS0B,EAAMuD,sBAExElD,SAASwC,GACTf,KAAK,QAAS9B,GACda,SAASb,EAAMmD,WAAa,gBAAkB,KAEzB,IAApBnD,EAAMkD,UACRtE,EAAG4E,QACD,4DAGF5E,EAAG4E,QACDrF,EACE,kEACAW,GAAG,SAAS,KACZkB,EAAMyD,QAAQ,KAKpB,MAAMC,EAAc9E,EACjBC,KAAK,8BACL8E,MAAM,CAAEC,QAAS,IAAKxC,QAAS,WAC/BtC,GAAG,cAAc,WAChB,MAAM+E,EAAM1F,EAAOC,MAChBuF,MAAM,QACN7B,KAAK,SAASgC,KAEbD,GACFA,EAAIE,IAAI,SAAU,KAEtB,IACCjF,GAAG,cAAc,WAChBX,EAAOC,MAAMuF,MAAM,OACrB,IAEE3D,EAAM1B,OAAS0B,EAAMuD,aACvBG,EAAYC,MAAM,UACpB,GAEN,IAEDK,SAAS,CACRC,MAAO,0BACPC,OAAQ,OACRC,KAAM,IACNC,OAAQ,OACRC,OAAQ1F,EAAQ2F,iBAAiBC,KAAK5F,GACtC6F,MAAO,WACL3B,EACGhE,KAAK,8BACLuD,MAAK,WACJjE,EAAOC,MAAMuF,MAAM,QAAQA,MAAM,UACnC,GACJ,EACAc,KAAM,WACJ5B,EACGhE,KAAK,8BACLuD,MAAK,WACJjE,EAAOC,MAAMuF,MAAM,SACrB,GACJ,IAgBJ,GAbAd,EAAcf,KAAK,aAAnBe,GAEIlE,EAAQc,UACVtB,EACE,qHAECuG,YAAY7B,GACZ/D,GAAG,SAAUmC,IACZA,EAAE0D,iBACFhG,EAAQgB,aAAa,IAIvBhB,EAAQkB,eAAe8C,OAAQ,CACjC,MAAMiC,EAA0BjG,EAAQkB,cACrCK,QACEF,GACCA,EAAMG,UAAU7B,OAAsC,IAA9B0B,EAAMG,UAAU+C,YAE3C2B,QAAO,CAACC,EAAK9E,KACZ,MAAM+E,EAAe/E,EAAMG,UAAU6E,UAAY,GAQjD,OANAF,EAAIC,GAAgBD,EAAIC,IAAiB,GACzCD,EAAIC,GAAcrF,KAAK,CACrBM,EAAMG,UAAU7B,KAAK6D,cACrBnC,IAGK8E,CAAG,GACT,CAAC,GAEAG,GACJ/G,GAAY+G,4BAA8B,IAC1CJ,QACA,CAACC,EAAKC,EAAcG,IAClBC,OAAOC,OAAON,EAAK,CAAE,CAACC,GAAeG,EAAI,KAC3C,CAAC,GAGHC,OAAOE,KAAKT,GACTU,MACC,CAACC,EAAGC,IACFC,QAAQD,GAAKC,QAAQF,IACrBN,EAA2BM,GACzBN,EAA2BO,IAC7BD,EAAEG,cAAcF,KAEnBhF,SAAQ,CAACuE,EAAcG,EAAGS,KACzB,MAAMC,EACJD,EAAiBhD,OAAS,EACtBxE,EAAO,4CACJmF,OACCnF,EACE,mDACA0H,KAAKd,GAAgB,UAExB1E,SAASuC,GACZA,EAENgC,EAAwBG,GACrBO,MAAK,CAACC,EAAGC,IAAMD,EAAE,GAAGG,cAAcF,EAAE,MACpChF,SAASsF,IACR,MAAM9F,EAAQ8F,EAAI,GAElB3H,EAAO,wCACJmF,OACCnF,EACE,8DACAW,GAAG,SAAS,KACZH,EAAQoH,SAAWpH,EAAQoH,UAAY,CAAC,EACxCpH,EAAQoH,SAAS/F,EAAMG,UAAU6F,IAC/BrH,EAAQoH,SAAS/F,EAAMG,UAAU6F,KAAO,EAE1CrH,EAAQsH,SACNjG,EAAMkG,OAAO,CACXF,GAAI,GAAGhG,EAAMG,UAAU6F,KAAKrH,EAAQwH,WAAWnG,EAAMG,UAAU6F,IAAMrH,EAAQoH,SAAS/F,EAAMG,UAAU6F,MAAQ,OAEjH,KAGJ1C,OAAO,SAAStD,EAAMG,UAAU7B,eAChC+B,SAASuF,GACT9D,KAAK,QAAS9B,EAAMG,UAAU,GACjC,GAEV,CAEA0B,EAAKkC,IAAI,CAAEqC,KAAM,MAAOC,WAAYxE,EAAKd,SAAW,IAEpD5C,EAAOC,MAAM0D,KAAK,OAAQD,EAC5B,CAEA1D,EAAOC,MAAMyC,SAAS,YACxB,CACF,IAEAzC,KAAKkI,eAAe9C,QAClBrF,EAAO,8BAA8BmF,OACnCnF,EAAO,mDAAmDmF,OACxDhC,IAIR,EAEAiF,oBAAqB,WACnBnI,KAAKoI,QAAQC,MACX,sIAEFrI,KAAKmC,eAAe1B,KAAK,kBAAkByE,OAAOlF,KAAKkI,eACzD,EAEA,mCAAoC,WAClC,MAAMzD,EAAgBzE,KAAKmC,eAAe1B,KACxC,sCAGEgE,EAAcF,QAChBE,EAAcf,KAAK,UAAUhB,KAAK+B,EAEtC,IAGFzE,KAAKU,GACH,CACE4H,aAAc,SAAUpI,GACtB,MAAM0B,EAAQ5B,KAAK4B,MAEnB,GAAIA,GAAOrB,QAAS,CAClB,MAAMkD,EAAO7B,EAAMrB,QAAQ4B,eACxB1B,KAAK,6BACLiD,KAAK,QAEJD,GACFA,EACGhD,KAAK,yBACLqB,QAAO,WACN,OAAO/B,EAAOC,MAAM0D,KAAK,WAAa9B,CACxC,IACC0C,SAAS,8BACT/B,KAAK,QAASrC,GACd8D,MAAK,WACA9D,IAAS0B,EAAMuD,YACjBpF,EAAOC,MAAMuF,MAAM,QAAQA,MAAM,WAEjCxF,EAAOC,MAAMuF,MAAM,SAEvB,GAEN,CACF,GAEF,SAEJ,EAEuCgD,S,QAAU,Q,6DCjcjD,MAoNA,GAAiBC,UApNF,SAAU1I,GACvB,MAAMC,EAASC,KAAKD,OAEpB,SAAS0I,IACP,MAAMC,EAAe3I,EAAO,+BACtBmC,EAAenC,EAAO,wCAAwC0H,KAAKiB,GAAYC,aAAa3I,KAAKoI,SACjGQ,EAAe5I,KAAK6I,UAAY7I,KAAK8I,WACrC5I,EAAe,GAAGJ,EAAWiJ,cAAgBH,EAAe,GAAGA,MAAmB,SAAS5I,KAAKgJ,MAElGlJ,EAAWiJ,cAAgBH,GAC7B1G,EAAUO,SAAS,oBAGrB,MAAMwG,EAAelJ,EAAO,uFAAuFG,4BAA+B+B,SAASC,GACrJgH,GAA6C,IAA9BpJ,EAAWqJ,eAA2B,EAAIF,EAAaxI,KAAK,YAAY2I,YAAW,GAAQ,GAEhHH,EAAa5D,SAEbrF,KAAKwI,UAAY,IAAIa,UAAU,CAC7BC,OAAYtJ,KACZkC,UAAYwG,EACZ/F,MAAY+F,EAAW/F,QACvB4G,OAAYvJ,KAAKuJ,OACjBP,IAAYhJ,KAAKgJ,IACjB5C,MAAY,EACZoD,IAAYxJ,KAAKyJ,eACjBC,UAAY,EACZhI,OAAY,CACV,iBAAkB,CAChBxB,KAAgBA,EAChByJ,OAAgB,GAChBC,cAAgB,GAChBC,QAAgB,EAChBC,QAAgB,EAChB/E,YAAgB,EAEhBgF,MAAO,SAAUlH,GACf,MAAMmH,EAAShK,KAAKkC,UAAUoH,SAASU,SAAShC,KAC1CiC,EAASpH,EAAEqH,MAAQF,EACnBG,EAASnK,KAAKoK,iBAAiBC,OAAO,CAAEJ,EAAGA,EAAGK,EAAG,EAAGC,EAAG,EAAGC,EAAG,IAAK,GAExE,GAAIL,EACF,GAAe,YAAXtH,EAAE4H,KACCzK,KAAKO,QAAQ+I,OAAOI,UACvB1J,KAAKO,QAAQ+I,OAAOoB,OAAOP,EAAEnB,IAAKmB,EAAE/D,MAAO+D,EAAEX,KAAK,QAE/C,GAAIxJ,KAAK2K,eAAiBR,IAAMnK,KAAKO,QAAQqK,YAAa,CAG/D,GAFA5K,KAAKkC,UAAUqD,MAAM,QAEjB4E,EAAEU,MAAO,CACX,MAAM7C,EAAOgC,EAASG,EAAEW,SAAS9K,KAAK+K,OAAO3E,MAAQ+D,EAAEW,SAAS9K,KAAK+K,OAAOpI,MAAQ,EAEpF3C,KAAKkC,UAAUK,KAAK,QAAS4H,EAAEU,MAAM,IAAItF,MAAM,CAAEvC,QAAS,SAAUd,UAAW,SAAUqD,MAAM,QAAQ7B,KAAK,SAASgC,KAAKC,IAAI,QAAQ,WAAc,OAAOqC,EAAOjI,EAAOC,MAAM2C,QAAU,CAAG,GAC9L,CAEA3C,KAAK2K,aAAeR,CACtB,CAEJ,EAEAa,qBAAsB,WACpB,MAAMpJ,EAAQ5B,KAEdA,KAAKiL,OAELjL,KAAKkC,UAAUxB,GAAG,CAChBwK,UAAarI,IAAQjB,EAAMmI,MAAMlH,EAAE,EACnCsI,SAAatI,IACX,GAAIjB,EAAMrB,QAAQ6K,UAAUC,GAAGxI,EAAEyI,gBAAkB1J,EAAMrB,QAAQ6K,UAAU3K,KAAKoC,EAAEyI,eAAe/G,OAC/F,OAAO,EAGT3C,EAAMM,UAAUqD,MAAM,QACtB3D,EAAM+I,cAAe,CAAK,GAE3B,uBAGH3K,KAAKkC,UAAUxB,GAAG,aAAc,qCAAsCmC,IACpEA,EAAE0I,iBAAiB,GAEvB,EAEAjD,aAAc,WACZtI,KAAK6K,MAAMlF,IAAI,aAAc,GAAG3F,KAAK6K,MAAMlB,aAC7C,KAIJqB,qBAAsB,OAEtB/H,UAAW,WACTjD,KAAKwL,iBACLxL,KAAKoL,UAAUK,QACjB,EAEAC,eAAgB,WACd1L,KAAK4B,MAAQ5B,KAAK0B,OAAO,EAC3B,EAEAyG,oBAAqB,WACnB,MAAMK,EAAYxI,KACZsJ,EAAYtJ,KAAKsJ,OAEvB,SAASsB,IACPpC,EAAUoC,aAAc,EACxBpC,EAAU5G,MAAM+J,KAAK,aAAapG,MAAM,OAC1C,CAEA,SAASqG,EAAe/I,EAAGgJ,GACzBrD,EAAUoC,aAAc,EAExB,MAAMG,EAAQvC,EAAUiB,eAAiBjB,EAAU7F,MAC7CoD,EAAmB,eAAXlD,EAAE4H,KAAwB1K,EAAOC,MAAM0D,KAAK,gBAAgBqC,UAAO+F,EAC3E1F,EAAiB,MAATL,EAAeuD,EAAOlD,MAAQ2F,KAAKC,IAAID,KAAKE,MAAMJ,EAAGf,SAAS9C,KAAO+C,GAAQ,GACrFvB,EAAiB,MAATzD,EAAeuD,EAAOE,IAAmB,aAAX3G,EAAE4H,KAAsBrE,EAAQkD,EAAO/E,OAAS,EAAIwH,KAAKE,MAAMJ,EAAGK,OAAO9C,YAAW,GAAQ2B,GAAS3E,EAE7IA,IAAUkD,EAAOlD,OAASoD,IAAQF,EAAOE,KAC3CF,EAAOoB,OAAOlC,EAAUQ,IAAK5C,EAAOoD,GAAK,EAAiB,aAAX3G,EAAE4H,KAErD,EAEkC,IAA9B3K,EAAWqJ,gBACbnJ,KAAKkI,eAAe7C,SACpBrF,KAAKkI,eAAiBnI,IACtBmC,EAAUO,SAAS,gBAEnBzC,KAAKkI,eAAevF,MAAMuG,GAG5BlJ,KAAKoL,UAAYrL,EAAO,gGAAgGkC,SAASC,GAAWyD,IAAI,CAC9IqC,KAAQkB,EACRvG,MAAQ3C,KAAK2C,MAAQuG,IACpB5E,WAAW5D,GAAG,CACfwK,UAAarI,IAAQ2F,EAAU5G,MAAMuK,WAAWpC,MAAMlH,EAAE,EACxDsI,SAAatI,IACX,MAAMrC,EAAKT,EAAO8C,EAAEyI,eAEpB,GAAI9C,EAAU4C,UAAUC,GAAG7K,IAAOgI,EAAU4C,UAAU3K,KAAKD,GAAI+D,QAAmC,QAAxB/D,EAAGmL,KAAK,aAAyBnL,EAAG8I,SAAS+B,GAAG7C,EAAU5G,MAAM+J,KAAK,iBAAiB,IAC9J,OAAO,EAGTnD,EAAU5G,MAAM+J,KAAK,aAAapG,MAAM,QACxCiD,EAAU5G,MAAM+J,KAAK,gBAAgB,EAAM,IAI1CrC,EAAOI,UACV1J,KAAKoL,UAAUgB,UAAU,CACvBrG,KAAc,IACdsG,YAAcrM,KAAKoI,QACnBhC,MAAcwE,EACdvE,KAAcuF,IACbU,UAAU,CACXC,QAAc,OACdF,YAAc,SACdjG,MAAcwE,EACdvE,KAAcuF,EACdY,OAAc,SAAU3J,EAAGgJ,GACzBA,EAAGY,QAAQ9G,IAAI,OAAQoG,KAAKC,IAAI,EAAGH,EAAGf,SAAS9C,OAE3C6D,EAAGf,SAAS9C,KAAO,EACrB6D,EAAGY,QAAQ9J,MAAMoJ,KAAKW,IAAIb,EAAGc,KAAKhK,MAAOkJ,EAAGY,QAAQnD,SAAS3G,QAAUkJ,EAAGf,SAAS9C,OAEnF6D,EAAGY,QAAQ9J,MAAMkJ,EAAGc,KAAKhK,MAAQkJ,EAAGf,SAAS9C,KAEjD,GAGN,EAEAwD,eAAgB,WACd,MAAMxD,EAAShI,KAAKsJ,OAAOlD,MAAQpG,KAAK+K,MAClCpI,EAAS3C,KAAKsJ,OAAOE,IAAQxJ,KAAK+K,MAAS/C,EAEjDhI,KAAKoL,UAAUzF,IAAI,CAAEqC,KAAMA,EAAMrF,MAAOA,GAC1C,KAGsC,IAApC3C,KAAK4M,cAAc/M,cACrBE,EAAO,8BAA8B4J,QAAO,CAAC7C,EAAG0D,IAAMA,EAAItI,EAAUyH,WAAUkD,UAAU7M,KAAKkI,eAEjG,CAEA,SAAS4E,IACP,MAAM5K,EAAYlC,KAAKwI,UAAUtG,UAAUoH,SAE3CtJ,KAAKwI,UAAUuE,UACf7K,EAAUmD,SAEVoD,EAAgB/F,KAAK1C,KACvB,CAEAA,KAAKU,GAAG,CACNuC,UAAWwF,EAEXuE,cAAe,WACThN,KAAKwI,WACPxI,KAAKwI,UAAUgD,gBAEnB,EAEAyB,cAAeH,EAEfI,YAAa,SAAUlE,GACjBhJ,KAAKwI,WAAaxI,KAAKwI,UAAUQ,MAAQA,GAC3C8D,EAAkBpK,KAAK1C,KAE3B,GAEJ,E","sources":["webpack://genoverse/./src/js/plugins/controlPanel.js","webpack://genoverse/./src/js/plugins/karyotype.js"],"sourcesContent":["import \"../../css/controlPanel.css\";\nimport karyotype from \"./karyotype\";\n\nconst plugin = function (pluginConf) {\n  const jQuery = this.jQuery;\n\n  this.controls = [\n    // Scroll left/right\n    {\n      name: \"Scroll left and right by pressing and holding these buttons\",\n      buttons: [\n        {\n          name: \"Scroll left\",\n          icon: '<i class=\"fas fa-chevron-left\"></i>',\n          class: \"gv-scroll-left\",\n        },\n        {\n          name: \"Scroll right\",\n          icon: '<i class=\"fas fa-chevron-right\"></i>',\n          class: \"gv-scroll-right\",\n        },\n      ],\n      init: function (browser) {\n        const el = jQuery(this);\n\n        el.find(\".gv-scroll-left, .gv-scroll-right\").on({\n          mousedown: () => {\n            browser.startDragScroll();\n          },\n          mouseup: () => {\n            browser.stopDragScroll();\n          },\n        });\n\n        el.find(\".gv-scroll-left\").mousehold(50, () => {\n          browser.move(browser.scrollDelta);\n        });\n        el.find(\".gv-scroll-right\").mousehold(50, () => {\n          browser.move(-browser.scrollDelta);\n        });\n      },\n    },\n\n    // Zoom in/out\n    {\n      name: \"Zoom-in and zoom-out\",\n      buttons: [\n        {\n          name: \"Zoom in\",\n          icon: '<i class=\"fas fa-search-plus\"></i>',\n          class: \"gv-zoom-in\",\n          action: (browser) => {\n            browser.zoomIn();\n          },\n        },\n        {\n          name: \"Zoom out\",\n          icon: '<i class=\"fas fa-search-minus\"></i>',\n          class: \"gv-zoom-out\",\n          action: (browser) => {\n            browser.zoomOut();\n          },\n        },\n      ],\n    },\n  ];\n\n  if (this.saveable) {\n    this.controls.push({\n      icon: '<i class=\"fas fa-undo\"></i>',\n      name: \"Reset tracks and configuration\",\n      action: (browser) => {\n        browser.resetConfig();\n      },\n    });\n  }\n\n  this.on({\n    beforeInit: function () {\n      const browser = this;\n\n      this.tracksLibrary = (this.tracksLibrary || this.tracks)\n        .map((track) => this.normaliseTrackDefinition(track))\n        .filter((track) => track.prototype.name);\n\n      const panel = jQuery(`\n        <table cellspacing=0 cellpadding=0 class=\"gv\">\n          <tr>\n            <td class=\"gv-panel gv-panel-left\"></td>\n            <td class=\"gv-canvas-container\"></td>\n            <td class=\"gv-panel gv-panel-right\"></td>\n          </tr>\n        </table>\n      `)\n        .appendTo(this.container)\n        .find(\".gv-panel-right\");\n\n      this.controlPanel = panel;\n      this.superContainer = this.container;\n      this.container = jQuery(\".gv-canvas-container\", this.container);\n\n      browser.controls.forEach((control) => {\n        const buttonSet = jQuery('<div class=\"gv-button-set\">')\n          .attr(\"title\", control.name)\n          .appendTo(browser.superContainer.find(\".gv-panel-right\"));\n        const buttons = control.buttons || [control];\n\n        buttons.forEach((button) => {\n          const el = jQuery(`<button>${button.icon}</button>`)\n            .addClass(button.class)\n            .attr(\"title\", button.name)\n            .appendTo(buttonSet);\n\n          if (button.action) {\n            el.on(\"click\", () => {\n              button.action.call(el[0], browser);\n            });\n          }\n\n          if (button.init && button !== control) {\n            button.init.call(el[0], browser);\n          }\n        });\n\n        if (control.init) {\n          control.init.call(buttonSet, browser);\n        }\n      });\n\n      this.superContainer.width(this.width);\n\n      // ESC key to toggle crosshair select to drag mode and close menus\n      jQuery(document).on(\"keydown\", (e) => {\n        if (e.keyCode === 27) {\n          if (panel.find(\"button.gv-drag-select\").hasClass(\"gv-active\")) {\n            panel.find(\"button.gv-drag-scroll\").trigger(\"click\");\n          }\n\n          jQuery(\".gv-menu .gv-close\").trigger(\"click\");\n        }\n      });\n    },\n\n    afterInit: function () {\n      const browser = this;\n      const tracksButton = jQuery(\n        '<button class=\"gv-tracks-library-button\" title=\"Tracks menu\"><i class=\"fas fa-bars\"></i> Tracks</button>',\n      ).on(\"click\", function () {\n        const button = this;\n\n        const getTrackTags = (track, tags) =>\n          track.constructor?.ancestor?.prototype\n            ? getTrackTags(\n                track.constructor.ancestor.prototype,\n                tags.concat(track.constructor.ancestor.prototype.tags || []),\n              )\n            : tags;\n\n        if (jQuery(this).hasClass(\"gv-active\")) {\n          jQuery(\".gv-menu.gv-tracks-menu .gv-close\").trigger(\"click\");\n          jQuery(this).removeClass(\"gv-active\");\n        } else {\n          let menu = jQuery(this).data(\"menu\");\n\n          if (menu) {\n            menu.show();\n          } else {\n            menu = browser\n              .makeMenu({\n                \"Currently enabled tracks:\": \"Available tracks:\",\n                '<div class=\"gv-current-tracks\"></div>':\n                  '<input placeholder=\"Search\"><div class=\"gv-available-tracks\"></div>',\n              })\n              .addClass(\"gv-tracks-menu\");\n\n            jQuery(\"input[placeholder=Search]\", menu).on(\"keyup\", function () {\n              const str = this.value.toLowerCase();\n\n              jQuery(\".gv-tracks-library-item\", menu).each(function () {\n                const track = jQuery(this).data(\"track\");\n\n                let match = false;\n\n                if (track.name && track.name.toLowerCase().indexOf(str) >= 0) {\n                  match = true;\n                } else {\n                  const tags = getTrackTags(track, []).concat(track.tags || []);\n\n                  if (tags.some((tag) => tag.toLowerCase().indexOf(str) >= 0)) {\n                    match = true;\n                  }\n                }\n\n                jQuery(this)[match ? \"removeClass\" : \"addClass\"](\"gv-hide\");\n              });\n\n              jQuery(\".gv-tracks-library-category\", menu).each(function () {\n                const visibleTracks = jQuery(this).children(\n                  \".gv-tracks-library-item:not(.gv-hide)\",\n                );\n\n                jQuery(this)[visibleTracks.length ? \"removeClass\" : \"addClass\"](\n                  \"gv-hide\",\n                );\n              });\n            });\n\n            jQuery(\".gv-close\", menu).on(\"click\", () => {\n              jQuery(button).removeClass(\"gv-active\");\n            });\n\n            const availableTracks = jQuery(\".gv-available-tracks\", menu);\n            const currentTracks = jQuery(\".gv-current-tracks\", menu)\n              .before(\n                '<div class=\"gv-current-tracks-instructions\">Drag and drop to reorder</div>',\n              )\n              .data({\n                reload: function () {\n                  jQuery(this).empty().data(\"listTracks\")();\n                },\n                listTracks: function () {\n                  browser.tracks\n                    .filter(\n                      (track) =>\n                        track.name &&\n                        !(track.removable === false && track.unsortable) &&\n                        !track.parentTrack &&\n                        !track.lockToTrack,\n                    )\n                    .forEach((track) => {\n                      const el = jQuery('<div class=\"gv-tracks-menu-track\">')\n                        .append(\n                          `<span class=\"gv-tracks-menu-track-name\" title=\"${track.name}\">${track.defaultName}</span>`,\n                        )\n                        .appendTo(currentTracks)\n                        .data(\"track\", track)\n                        .addClass(track.unsortable ? \"gv-unsortable\" : \"\");\n\n                      if (track.removable === false) {\n                        el.prepend(\n                          '<i class=\"gv-remove-track gv-menu-button fas fa-circle\">',\n                        );\n                      } else {\n                        el.prepend(\n                          jQuery(\n                            '<i class=\"gv-remove-track gv-menu-button fas fa-times-circle\">',\n                          ).on(\"click\", () => {\n                            track.remove();\n                          }),\n                        );\n                      }\n\n                      const trackNameEl = el\n                        .find(\".gv-tracks-menu-track-name\")\n                        .tipsy({ gravity: \"w\", trigger: \"manual\" })\n                        .on(\"mouseenter\", function () {\n                          const tip = jQuery(this)\n                            .tipsy(\"show\")\n                            .data(\"tipsy\").$tip;\n\n                          if (tip) {\n                            tip.css(\"zIndex\", 1002);\n                          }\n                        })\n                        .on(\"mouseleave\", function () {\n                          jQuery(this).tipsy(\"hide\");\n                        });\n\n                      if (track.name === track.defaultName) {\n                        trackNameEl.tipsy(\"disable\");\n                      }\n                    });\n                },\n              })\n              .sortable({\n                items: \"div:not(.gv-unsortable)\",\n                cursor: \"move\",\n                axis: \"y\",\n                handle: \"span\",\n                update: browser.updateTrackOrder.bind(browser),\n                start: function () {\n                  currentTracks\n                    .find(\".gv-tracks-menu-track-name\")\n                    .each(function () {\n                      jQuery(this).tipsy(\"hide\").tipsy(\"disable\");\n                    });\n                },\n                stop: function () {\n                  currentTracks\n                    .find(\".gv-tracks-menu-track-name\")\n                    .each(function () {\n                      jQuery(this).tipsy(\"enable\");\n                    });\n                },\n              });\n\n            currentTracks.data(\"listTracks\")();\n\n            if (browser.saveable) {\n              jQuery(\n                '<div class=\"gv-tracks-menu-reset gv-menu-button\"><i class=\"fas fa-undo\"></i> Reset tracks and configuration</div>',\n              )\n                .insertAfter(currentTracks)\n                .on(\"click\", (e) => {\n                  e.preventDefault();\n                  browser.resetConfig();\n                });\n            }\n\n            if (browser.tracksLibrary?.length) {\n              const tracksLibraryCategories = browser.tracksLibrary\n                .filter(\n                  (track) =>\n                    track.prototype.name && track.prototype.removable !== false,\n                )\n                .reduce((acc, track) => {\n                  const categoryName = track.prototype.category || \"\";\n\n                  acc[categoryName] = acc[categoryName] || [];\n                  acc[categoryName].push([\n                    track.prototype.name.toLowerCase(),\n                    track,\n                  ]);\n\n                  return acc;\n                }, {});\n\n              const tracksLibraryCategoryOrder = (\n                pluginConf?.tracksLibraryCategoryOrder || []\n              ).reduce(\n                (acc, categoryName, i) =>\n                  Object.assign(acc, { [categoryName]: i + 1 }),\n                {},\n              );\n\n              Object.keys(tracksLibraryCategories)\n                .sort(\n                  (a, b) =>\n                    Boolean(b) - Boolean(a) ||\n                    tracksLibraryCategoryOrder[a] -\n                      tracksLibraryCategoryOrder[b] ||\n                    a.localeCompare(b),\n                )\n                .forEach((categoryName, i, allCategoryNames) => {\n                  const parentEl =\n                    allCategoryNames.length > 1\n                      ? jQuery('<div class=\"gv-tracks-library-category\">')\n                          .append(\n                            jQuery(\n                              '<div class=\"gv-tracks-library-category-header\">',\n                            ).html(categoryName || \"Other\"),\n                          )\n                          .appendTo(availableTracks)\n                      : availableTracks;\n\n                  tracksLibraryCategories[categoryName]\n                    .sort((a, b) => a[0].localeCompare(b[0]))\n                    .forEach((row) => {\n                      const track = row[1];\n\n                      jQuery('<div class=\"gv-tracks-library-item\">')\n                        .append(\n                          jQuery(\n                            '<i class=\"gv-add-track gv-menu-button fas fa-plus-circle\">',\n                          ).on(\"click\", () => {\n                            browser.trackIds = browser.trackIds || {};\n                            browser.trackIds[track.prototype.id] =\n                              browser.trackIds[track.prototype.id] || 1;\n\n                            browser.addTrack(\n                              track.extend({\n                                id: `${track.prototype.id}${browser.tracksById[track.prototype.id] ? browser.trackIds[track.prototype.id]++ : \"\"}`,\n                              }),\n                            );\n                          }),\n                        )\n                        .append(`<span>${track.prototype.name}</span>`)\n                        .appendTo(parentEl)\n                        .data(\"track\", track.prototype);\n                    });\n                });\n            }\n\n            menu.css({ left: \"50%\", marginLeft: menu.width() / -2 });\n\n            jQuery(this).data(\"menu\", menu);\n          }\n\n          jQuery(this).addClass(\"gv-active\");\n        }\n      });\n\n      this.labelContainer.prepend(\n        jQuery('<li class=\"gv-unsortable\">').append(\n          jQuery('<div class=\"gv-button-set\" title=\"Tracks menu\">').append(\n            tracksButton,\n          ),\n        ),\n      );\n    },\n\n    afterAddDomElements: function () {\n      this.wrapper.after(\n        '<div class=\"gv-powered-by\">Powered by <a target=\"_blank\" href=\"https://github.com/DECIPHER-genomics/Genoverse\">Genoverse</a></div>',\n      );\n      this.superContainer.find(\".gv-panel-left\").append(this.labelContainer);\n    },\n\n    \"afterAddTracks afterRemoveTracks\": function () {\n      const currentTracks = this.superContainer.find(\n        \".gv-tracks-menu .gv-current-tracks\",\n      );\n\n      if (currentTracks.length) {\n        currentTracks.data(\"reload\").call(currentTracks);\n      }\n    },\n  });\n\n  this.on(\n    {\n      afterSetName: function (name) {\n        const track = this.track;\n\n        if (track?.browser) {\n          const menu = track.browser.superContainer\n            .find(\".gv-tracks-library-button\")\n            .data(\"menu\");\n\n          if (menu) {\n            menu\n              .find(\".gv-tracks-menu-track\")\n              .filter(function () {\n                return jQuery(this).data(\"track\") === track;\n              })\n              .children(\".gv-tracks-menu-track-name\")\n              .attr(\"title\", name)\n              .each(function () {\n                if (name === track.defaultName) {\n                  jQuery(this).tipsy(\"hide\").tipsy(\"disable\");\n                } else {\n                  jQuery(this).tipsy(\"enable\");\n                }\n              });\n          }\n        }\n      },\n    },\n    \"tracks\",\n  );\n};\n\nexport default { controlPanel: plugin, requires: karyotype };\n","import '../../css/karyotype.css';\nimport Chromosome from '../Track/library/Chromosome';\n\nconst plugin = function (pluginConf) {\n  const jQuery = this.jQuery;\n\n  function createKaryotype() {\n    const chromosome   = jQuery('<div class=\"gv-chromosome\">');\n    const container    = jQuery('<div class=\"gv-karyotype-container\">').html(chromosome).insertBefore(this.wrapper);\n    const assemblyName = this.assembly || this.genomeName;\n    const name         = `${pluginConf.showAssembly && assemblyName ? `${assemblyName}: ` : ''}Chr ${this.chr}`;\n\n    if (pluginConf.showAssembly && assemblyName) {\n      container.addClass('gv-show-assembly');\n    }\n\n    const measureWidth = jQuery(`<div class=\"gv-chromosome\"><ul class=\"gv-label-container\"><li><span class=\"gv-name\">${name}</span></li></ul></div>`).appendTo(container);\n    const labelWidth   = pluginConf.karyotypeLabel === false ? 0 : measureWidth.find('.gv-name').outerWidth(true) + 10;\n\n    measureWidth.remove();\n\n    this.karyotype = new Genoverse({\n      parent    : this,\n      container : chromosome,\n      width     : chromosome.width(),\n      genome    : this.genome,\n      chr       : this.chr,\n      start     : 1,\n      end       : this.chromosomeSize,\n      isStatic  : true,\n      tracks    : [\n        Chromosome.extend({\n          name          : name,\n          height        : 20,\n          featureHeight : 20,\n          border        : false,\n          legend        : false,\n          unsortable    : true,\n\n          click: function (e) {\n            const offset = this.container.parent().offset().left;\n            const x      = e.pageX - offset;\n            const f      = this.featurePositions.search({ x: x, y: 1, w: 1, h: 1 })[0];\n\n            if (f) {\n              if (e.type === 'mouseup') {\n                if (!this.browser.parent.isStatic) {\n                  this.browser.parent.moveTo(f.chr, f.start, f.end, true);\n                }\n              } else if (this.hoverFeature !== f && !this.browser.hideTooltip) {\n                this.container.tipsy('hide');\n\n                if (f.label) {\n                  const left = offset + f.position[this.scale].start + f.position[this.scale].width / 2;\n\n                  this.container.attr('title', f.label[0]).tipsy({ trigger: 'manual', container: 'body' }).tipsy('show').data('tipsy').$tip.css('left', function () { return left - jQuery(this).width() / 2; });\n                }\n\n                this.hoverFeature = f;\n              }\n            }\n          },\n\n          addUserEventHandlers: function () {\n            const track = this;\n\n            this.base();\n\n            this.container.on({\n              mousemove : (e) => { track.click(e); },\n              mouseout  : (e) => {\n                if (track.browser.viewPoint.is(e.relatedTarget) || track.browser.viewPoint.find(e.relatedTarget).length) {\n                  return true;\n                }\n\n                track.container.tipsy('hide');\n                track.hoverFeature = false;\n              },\n            }, '.gv-image-container');\n\n            // Don't allow zooming in and out on the karyotype image\n            this.container.on('mousewheel', '.gv-image-container, .gv-selector', (e) => {\n              e.stopPropagation();\n            });\n          },\n\n          afterSetName: function () {\n            this.label.css('lineHeight', `${this.label.height()}px`);\n          },\n        }),\n      ],\n\n      addUserEventHandlers: () => {},\n\n      afterInit: function () {\n        this.updatePosition();\n        this.viewPoint.fadeIn();\n      },\n\n      afterAddTracks: function () {\n        this.track = this.tracks[0];\n      },\n\n      afterAddDomElements: function () {\n        const karyotype = this;\n        const parent    = this.parent;\n\n        function hideTooltip() {\n          karyotype.hideTooltip = true;\n          karyotype.track.prop('container').tipsy('hide');\n        }\n\n        function updateLocation(e, ui) {\n          karyotype.hideTooltip = false;\n\n          const scale = karyotype.chromosomeSize / karyotype.width;\n          const axis  = e.type === 'resizestop' ? jQuery(this).data('ui-resizable').axis : undefined;\n          const start = axis === 'e' ? parent.start : Math.max(Math.floor(ui.position.left * scale), 1);\n          const end   = axis === 'w' ? parent.end   : e.type === 'dragstop' ? start + parent.length - 1 : Math.floor(ui.helper.outerWidth(true) * scale) + start;\n\n          if (start !== parent.start || end !== parent.end) {\n            parent.moveTo(karyotype.chr, start, end, true, e.type === 'dragstop');\n          }\n        }\n\n        if (pluginConf.karyotypeLabel === false) {\n          this.labelContainer.remove();\n          this.labelContainer = jQuery();\n          container.addClass('gv-no-label');\n        } else {\n          this.labelContainer.width(labelWidth);\n        }\n\n        this.viewPoint = jQuery('<div class=\"gv-karyotype-viewpoint-wrapper\"><div class=\"gv-karyotype-viewpoint\"></div></div>').appendTo(container).css({\n          left  : labelWidth,\n          width : this.width - labelWidth,\n        }).children().on({\n          mousemove : (e) => { karyotype.track.controller.click(e); },\n          mouseout  : (e) => {\n            const el = jQuery(e.relatedTarget);\n\n            if (karyotype.viewPoint.is(el) || karyotype.viewPoint.find(el).length || (el.prop('nodeName') === 'IMG' && el.parent().is(karyotype.track.prop('imgContainers')[0]))) {\n              return true;\n            }\n\n            karyotype.track.prop('container').tipsy('hide');\n            karyotype.track.prop('hoverFeature', false);\n          },\n        });\n\n        if (!parent.isStatic) {\n          this.viewPoint.draggable({\n            axis        : 'x',\n            containment : this.wrapper,\n            start       : hideTooltip,\n            stop        : updateLocation,\n          }).resizable({\n            handles     : 'e, w',\n            containment : 'parent',\n            start       : hideTooltip,\n            stop        : updateLocation,\n            resize      : function (e, ui) {\n              ui.element.css('left', Math.max(0, ui.position.left));\n\n              if (ui.position.left > 0) {\n                ui.element.width(Math.min(ui.size.width, ui.element.parent().width() - ui.position.left));\n              } else {\n                ui.element.width(ui.size.width + ui.position.left);\n              }\n            },\n          });\n        }\n      },\n\n      updatePosition: function () {\n        const left  =  this.parent.start * this.scale;\n        const width = (this.parent.end   * this.scale) - left;\n\n        this.viewPoint.css({ left: left, width: width });\n      },\n    });\n\n    if (this.loadedPlugins.controlPanel !== true) {\n      jQuery('<li class=\"gv-unsortable\">').height((i, h) => h + container.height()).prependTo(this.labelContainer);\n    }\n  }\n\n  function recreateKaryotype() {\n    const container = this.karyotype.container.parent();\n\n    this.karyotype.destroy();\n    container.remove();\n\n    createKaryotype.call(this);\n  }\n\n  this.on({\n    afterInit: createKaryotype,\n\n    afterSetRange: function () {\n      if (this.karyotype) {\n        this.karyotype.updatePosition();\n      }\n    },\n\n    afterSetWidth: recreateKaryotype,\n\n    afterMoveTo: function (chr) {\n      if (this.karyotype && this.karyotype.chr !== chr) {\n        recreateKaryotype.call(this);\n      }\n    },\n  });\n};\n\nexport default { karyotype: plugin };\n"],"names":["controlPanel","pluginConf","jQuery","this","controls","name","buttons","icon","class","init","browser","el","find","on","mousedown","startDragScroll","mouseup","stopDragScroll","mousehold","move","scrollDelta","action","zoomIn","zoomOut","saveable","push","resetConfig","beforeInit","tracksLibrary","tracks","map","track","normaliseTrackDefinition","filter","prototype","panel","appendTo","container","superContainer","forEach","control","buttonSet","attr","button","addClass","call","width","document","e","keyCode","hasClass","trigger","afterInit","tracksButton","getTrackTags","tags","constructor","ancestor","concat","removeClass","menu","data","show","makeMenu","str","value","toLowerCase","each","match","indexOf","some","tag","visibleTracks","children","length","availableTracks","currentTracks","before","reload","empty","listTracks","removable","unsortable","parentTrack","lockToTrack","append","defaultName","prepend","remove","trackNameEl","tipsy","gravity","tip","$tip","css","sortable","items","cursor","axis","handle","update","updateTrackOrder","bind","start","stop","insertAfter","preventDefault","tracksLibraryCategories","reduce","acc","categoryName","category","tracksLibraryCategoryOrder","i","Object","assign","keys","sort","a","b","Boolean","localeCompare","allCategoryNames","parentEl","html","row","trackIds","id","addTrack","extend","tracksById","left","marginLeft","labelContainer","afterAddDomElements","wrapper","after","afterSetName","requires","karyotype","createKaryotype","chromosome","insertBefore","assemblyName","assembly","genomeName","showAssembly","chr","measureWidth","labelWidth","karyotypeLabel","outerWidth","Genoverse","parent","genome","end","chromosomeSize","isStatic","height","featureHeight","border","legend","click","offset","x","pageX","f","featurePositions","search","y","w","h","type","moveTo","hoverFeature","hideTooltip","label","position","scale","addUserEventHandlers","base","mousemove","mouseout","viewPoint","is","relatedTarget","stopPropagation","updatePosition","fadeIn","afterAddTracks","prop","updateLocation","ui","undefined","Math","max","floor","helper","controller","draggable","containment","resizable","handles","resize","element","min","size","loadedPlugins","prependTo","recreateKaryotype","destroy","afterSetRange","afterSetWidth","afterMoveTo"],"sourceRoot":""}
