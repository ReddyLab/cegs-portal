"use strict";(self.webpackChunkgenoverse=self.webpackChunkgenoverse||[]).push([[772],{2772:(t,e,i)=>{i.r(e),i.d(e,{default:()=>o});var s=i(9195);const o={karyotype:function(t){const e=this.jQuery;function i(){const i=e('<div class="gv-chromosome">'),o=e('<div class="gv-karyotype-container">').html(i).insertBefore(this.wrapper),n=this.assembly||this.genomeName,a=`${t.showAssembly&&n?`${n}: `:""}Chr ${this.chr}`;t.showAssembly&&n&&o.addClass("gv-show-assembly");const r=e(`<div class="gv-chromosome"><ul class="gv-label-container"><li><span class="gv-name">${a}</span></li></ul></div>`).appendTo(o),h=!1===t.karyotypeLabel?0:r.find(".gv-name").outerWidth(!0)+10;r.remove(),this.karyotype=new Genoverse({parent:this,container:i,width:i.width(),genome:this.genome,chr:this.chr,start:1,end:this.chromosomeSize,isStatic:!0,tracks:[s.default.extend({name:a,height:20,featureHeight:20,border:!1,legend:!1,unsortable:!0,click:function(t){const i=this.container.parent().offset().left,s=t.pageX-i,o=this.featurePositions.search({x:s,y:1,w:1,h:1})[0];if(o)if("mouseup"===t.type)this.browser.parent.isStatic||this.browser.parent.moveTo(o.chr,o.start,o.end,!0);else if(this.hoverFeature!==o&&!this.browser.hideTooltip){if(this.container.tipsy("hide"),o.label){const t=i+o.position[this.scale].start+o.position[this.scale].width/2;this.container.attr("title",o.label[0]).tipsy({trigger:"manual",container:"body"}).tipsy("show").data("tipsy").$tip.css("left",(function(){return t-e(this).width()/2}))}this.hoverFeature=o}},addUserEventHandlers:function(){const t=this;this.base(),this.container.on({mousemove:e=>{t.click(e)},mouseout:e=>{if(t.browser.viewPoint.is(e.relatedTarget)||t.browser.viewPoint.find(e.relatedTarget).length)return!0;t.container.tipsy("hide"),t.hoverFeature=!1}},".gv-image-container"),this.container.on("mousewheel",".gv-image-container, .gv-selector",(t=>{t.stopPropagation()}))},afterSetName:function(){this.label.css("lineHeight",`${this.label.height()}px`)}})],addUserEventHandlers:()=>{},afterInit:function(){this.updatePosition(),this.viewPoint.fadeIn()},afterAddTracks:function(){this.track=this.tracks[0]},afterAddDomElements:function(){const i=this,s=this.parent;function n(){i.hideTooltip=!0,i.track.prop("container").tipsy("hide")}function a(t,o){i.hideTooltip=!1;const n=i.chromosomeSize/i.width,a="resizestop"===t.type?e(this).data("ui-resizable").axis:void 0,r="e"===a?s.start:Math.max(Math.floor(o.position.left*n),1),h="w"===a?s.end:"dragstop"===t.type?r+s.length-1:Math.floor(o.helper.outerWidth(!0)*n)+r;r===s.start&&h===s.end||s.moveTo(i.chr,r,h,!0,"dragstop"===t.type)}!1===t.karyotypeLabel?(this.labelContainer.remove(),this.labelContainer=e(),o.addClass("gv-no-label")):this.labelContainer.width(h),this.viewPoint=e('<div class="gv-karyotype-viewpoint-wrapper"><div class="gv-karyotype-viewpoint"></div></div>').appendTo(o).css({left:h,width:this.width-h}).children().on({mousemove:t=>{i.track.controller.click(t)},mouseout:t=>{const s=e(t.relatedTarget);if(i.viewPoint.is(s)||i.viewPoint.find(s).length||"IMG"===s.prop("nodeName")&&s.parent().is(i.track.prop("imgContainers")[0]))return!0;i.track.prop("container").tipsy("hide"),i.track.prop("hoverFeature",!1)}}),s.isStatic||this.viewPoint.draggable({axis:"x",containment:this.wrapper,start:n,stop:a}).resizable({handles:"e, w",containment:"parent",start:n,stop:a,resize:function(t,e){e.element.css("left",Math.max(0,e.position.left)),e.position.left>0?e.element.width(Math.min(e.size.width,e.element.parent().width()-e.position.left)):e.element.width(e.size.width+e.position.left)}})},updatePosition:function(){const t=this.parent.start*this.scale,e=this.parent.end*this.scale-t;this.viewPoint.css({left:t,width:e})}}),!0!==this.loadedPlugins.controlPanel&&e('<li class="gv-unsortable">').height(((t,e)=>e+o.height())).prependTo(this.labelContainer)}function o(){const t=this.karyotype.container.parent();this.karyotype.destroy(),t.remove(),i.call(this)}this.on({afterInit:i,afterSetRange:function(){this.karyotype&&this.karyotype.updatePosition()},afterSetWidth:o,afterMoveTo:function(t){this.karyotype&&this.karyotype.chr!==t&&o.call(this)}})}}}}]);
//# sourceMappingURL=772.genoverse.js.map
